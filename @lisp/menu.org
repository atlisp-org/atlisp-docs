#+title: @lisp UI 交互系统

* @lisp 界面

** 菜单及命令面板相关函数

@lisp 可以在安装时生成相应的菜单。目前 所有的功能菜单均集中于 菜单 @lisp(A) 中。

*** 添加菜单
=@:add-menu= 函数用于创建单个菜单。 

=@:add-menus= 用于创建多个菜单

**** @:add-menu 

#+BEGIN_SRC lisp 
  (@:add-menu "类别" "功能名称" '(功能函数 参数 ...))
  (defun 功能函数 (参数 ...)
     "功能定义"
   )
#+END_SRC

示例(无参数)：
#+BEGIN_SRC lisp 
(@:add-menu "大绘图" "附着签名" '(@:attach-sign))
(defun @:attach-sign ( )
   ... 
)
#+END_SRC

示例(有参数)：

#+BEGIN_SRC lisp 
  (@:add-menu "大绘图" "插入图框" '(@:insert-tukuang "tukuang.dwg" @:*tukuang*))
  (@:add-menu "变更及工程处理" "变更" '(@:insert-tukuang "bg-tukuang.dwg" @:*bg-tukuang*))
  (@:add-menu "变更及工程处理" "处理方案" '(@:insert-tukuang "fa-tukuang.dwg" @:*fa-tukuang*))

  (defun @:insert-tukuang (tk-file tk-dwg)
    ...)

#+END_SRC

**** @:add-menus
#+begin_src lisp
  ;; 一个类别，多个功能
  (@:add-menus
   '("类别"
     ("功能1" (expr1)) ; 本身在 quote 中，不用重复 quote
     ("功能2" (expr2))
     ("功能3" (expr3))))
  ;; 多个类别，多个功能
  (@:add-menus
   '(("类别1"
      ("功能1" (expr1))
      ("功能2" (expr2))
      ("功能3" (expr3)))
     ("类别2"
      ("功能4" (expr6))
      ("功能5" (expr5))
      ("功能6" (expr4)))

#+end_src
